!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self)["base-captcha-getCaptchaSenseKey"]=n()}(this,(function(){"use strict";var e=function e(n){function t(e,n,o){var i,s={};if(Array.isArray(e))return e.concat(n);for(i in e)s[o?i.toLowerCase():i]=e[i];for(i in n){var c=o?i.toLowerCase():i,a=n[i];s[c]=c in s&&"object"==typeof a?t(s[c],a,"headers"===c):a}return s}function o(e,o,i,s){"string"!=typeof e&&(e=(o=e).url);var c={config:o},a=t(n,o),r={},l=s||a.data;(a.transformRequest||[]).map((function(e){l=e(l,a.headers)||l})),l&&"object"==typeof l&&"function"!=typeof l.append&&(l=JSON.stringify(l),r["content-type"]="application/json");var u="undefined"!=typeof document&&document.cookie.match(RegExp("(^|; )"+a.xsrfCookieName+"=([^;]*)"));if(u&&(r[a.xsrfHeaderName]=u[2]),a.auth&&(r.authorization=a.auth),a.baseURL&&(e=e.replace(/^(?!.*\/\/)\/?(.*)$/,a.baseURL+"/$1")),a.params){var d=~e.indexOf("?")?"&":"?";e+=d+(a.paramsSerializer?a.paramsSerializer(a.params):new URLSearchParams(a.params))}return(a.fetch||fetch)(e,{method:i||a.method,body:l,headers:t(a.headers,r,!0),credentials:a.withCredentials?"include":"same-origin"}).then((function(e){for(var n in e)"function"!=typeof e[n]&&(c[n]=e[n]);var t=a.validateStatus?a.validateStatus(e.status):e.ok;return"stream"==a.responseType?(c.data=e.body,c):e[a.responseType||"text"]().then((function(e){c.data=e,c.data=JSON.parse(e)})).catch(Object).then((function(){return t?c:Promise.reject(c)}))}))}return n=n||{},o.request=o,o.get=function(e,n){return o(e,n,"get")},o.delete=function(e,n){return o(e,n,"delete")},o.head=function(e,n){return o(e,n,"head")},o.options=function(e,n){return o(e,n,"options")},o.post=function(e,n,t){return o(e,t,"post",n)},o.put=function(e,n,t){return o(e,t,"put",n)},o.patch=function(e,n,t){return o(e,t,"patch",n)},o.all=Promise.all.bind(Promise),o.spread=function(e){return function(n){return e.apply(this,n)}},o.CancelToken="function"==typeof AbortController?AbortController:Object,o.defaults=n,o.create=e,o}();var n=function(e,n,t){return e(t={path:n,exports:{},require:function(e,n){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},t.exports),t.exports}((function(e){
/*!
	  * $script.js JS loader & dependency manager
	  * https://github.com/ded/script.js
	  * (c) Dustin Diaz 2014 | License MIT
	  */
!function(n,t){e.exports?e.exports=t():this.$script=t()}(0,(function(){var e,n,t=document,o=t.getElementsByTagName("head")[0],i={},s={},c={};function a(e,n){for(var t=0,o=e.length;o>t;++t)if(!n(e[t]))return false;return 1}function r(e,n){a(e,(function(e){return n(e),1}))}function l(n,t,o){n=n.push?n:[n];var d=t&&t.call,f=d?t:o,p=d?n.join(""):t,w=n.length;function h(e){return e.call?e():i[e]}function g(){if(!--w)for(var e in i[p]=1,f&&f(),s)a(e.split("|"),h)&&!r(s[e],h)&&(s[e]=[])}return setTimeout((function(){r(n,(function n(t,o){return null===t?g():(o||/^https?:\/\//.test(t)||!e||(t=-1===t.indexOf(".js")?e+t+".js":e+t),c[t]?2==c[t]?g():setTimeout((function(){n(t,!0)}),0):(c[t]=1,void u(t,g)))}))}),0),l}function u(e,i){var s,a=t.createElement("script");a.onload=a.onerror=a.onreadystatechange=function(){a.readyState&&!/^c|loade/.test(a.readyState)||s||(a.onload=a.onreadystatechange=null,s=1,c[e]=2,i())},a.async=1,a.src=n?e+(-1===e.indexOf("?")?"?":"&")+n:e,o.insertBefore(a,o.lastChild)}return l.get=u,l.order=function(e,n,t){!function o(i){i=e.shift(),e.length?l(i,o):l(i,n,t)}()},l.path=function(n){e=n},l.urlArgs=function(e){n=e},l.ready=function(e,n,t){var o,c=[];return!r(e=e.push?e:[e],(function(e){i[e]||c.push(e)}))&&a(e,(function(e){return i[e]}))?n():(o=e.join("|"),s[o]=s[o]||[],s[o].push(n),t&&t(c)),l},l.done=function(e){l([null],e)},l}))}));function t(e,t){"gt_sense"===t.type&&window.lagouGTSenseCallbackList.push(t.callback),"tc_sense"===t.type&&window.lagouTCSenseCallbackList.push(t.callback),"gt_sense_v4"===t.type&&window.lagouGTV4SenseCallbackList.push(t.callback);var o=void 0!==window.initSense,i=void 0!==window.TencentCaptcha,s=void 0!==window.initGeetest4;return o&&"gt_sense"===t.type||s&&"gt_sense_v4"===t.type||i&&"tc_sense"===t.type?(window.senseScriptLoadLock=!1,void t.callback()):("gt_sense"!==t.type||window.senseGTScriptLoadLock||(window.senseGTScriptLoadLock=!0,n(["".concat(e,"?v=")+(new Date).getTime()],(function(){window.senseGTScriptLoadLock=!1,lagouGTSenseCallbackList.forEach((function(e){e&&e()}))}))),"gt_sense_v4"!==t.type||window.senseGTV4ScriptLoadLock||(window.senseGTV4ScriptLoadLock=!0,n(["".concat(e,"?v=")+(new Date).getTime()],(function(){window.senseGTV4ScriptLoadLock=!1,lagouGTV4SenseCallbackList.forEach((function(e){e&&e()}))}))),void("tc_sense"!==t.type||window.senseTCScriptLoadLock||(window.senseTCScriptLoadLock=!0,n(["".concat(e,"?v=")+(new Date).getTime()],(function(){window.senseTCScriptLoadLock=!1,lagouTCSenseCallbackList.forEach((function(e){e&&e()}))})))))}void 0===window.senseTCScriptLoadLock&&(window.senseTCScriptLoadLock=!1),void 0===window.senseGTScriptLoadLock&&(window.senseGTScriptLoadLock=!1),void 0===window.senseGTV4ScriptLoadLock&&(window.senseGTV4ScriptLoadLock=!1),void 0===window.lagouGTSenseCallbackList&&(window.lagouGTSenseCallbackList=[]),void 0===window.lagouTCSenseCallbackList&&(window.lagouTCSenseCallbackList=[]),void 0===window.lagouGTV4SenseCallbackList&&(window.lagouGTV4SenseCallbackList=[]);var o=function(){var e="",n="";if(window.performance&&window.performance.getEntriesByType&&window.addEventListener&&navigator.userAgent){var t,o={},i=navigator.userAgent.toLowerCase();(t=i.match(/rv:([\d.]+)\) like gecko/))||(t=i.match(/msie ([\d.]+)/))?o.ie=t[1]:(t=i.match(/firefox\/([\d.]+)/))?o.firefox=t[1]:(t=i.match(/chrome\/([\d.]+)/))?o.chrome=t[1]:(t=i.match(/opera.([\d.]+)/))?o.opera=t[1]:(t=i.match(/version\/([\d.]+).*safari/))&&(o.safari=t[1]);var s=-1!=i.indexOf("windows",0)?1:0,c=-1!=i.indexOf("mac",0)?1:0,a=-1!=i.indexOf("linux",0)?1:0,r=-1!=i.indexOf("x11",0)?1:0;e=s?"MS Windows":c?"Apple mac":a?"Linux":r?"Unix":"other",o.ie&&(n="IE: "+o.ie),o.firefox&&(n="Firefox: "+o.firefox),o.chrome&&(n="Chrome: "+o.chrome),o.opera&&(n="Opera: "+o.opera),o.safari&&(n="Safari: "+o.safari)}return function(){return{os:e,bs:n}}}();function i(e){var n=e.message,t=e.lineno,i=e.colno,s=e.error,c="";try{c=s.stack.replace(/\s+/g," ")}catch(e){c=s}!function(e,n,t){var o=1==n?"POST":"GET";"undefined"==t&&(t=null);var i=null;window.XMLHttpRequest&&(i=new XMLHttpRequest),null!=i&&(i.onreadystatechange=function(){},i.open(o,e,!0),i.setRequestHeader("Content-type","application/json;charset=utf-8"),i.send(t))}("/upload/ltm/oss.html?u="+location.pathname+"&em="+n+"&su="+window.location.href+"&ln="+(t||0)+"&cm="+(i||0)+"&eo="+c+"&os="+o().os+"&bs="+o().bs+"&t="+ +new Date)}window.gtsenseSwitchFetchResult={isFirst:!0,pengdingGtSense:!1,style:{}};var s=function(e){var n=function(e){var n=e.tcAppId,t=e.successCallback,o=e.closeCallback;return new window.TencentCaptcha(n,(function(e){0!==e.ret?o&&o(e):t({challenge:e.ticket,randstr:e.randstr,appid:n})}))}({tcAppId:e.tcAppId,successCallback:e.successCallback,closeCallback:e.closeCallback});n.show()},c=function(n){var o=n.tcAppId,c=n.gtAppId,a=n.gtV4AppId,r=n.level,l=n.successCallback,u=n.closeCallback,d=n.errorCallback,f=n.normalCallback;(function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n)return new Promise((function(e,t){e({vertifyStyle:n})}));if(!window.gtsenseSwitchFetchResult.isFirst)return new Promise((function(e,n){e({vertifyStyle:window.gtsenseSwitchFetchResult.style,verifyEnv:window.gtsenseSwitchFetchResult.verifyEnv})}));return new Promise((function(n,o){e({url:"https://passport.lagou.com/verify/getStyle.json?version=v2"}).then((function(e){var o,i,s=(null==e||null===(o=e.data)||void 0===o||null===(i=o.content)||void 0===i?void 0:i.data)||{},c=s.verifyStyleV2,a=s.verifyEnv,r=void 0===a?"online":a;window.gtsenseSwitchFetchResult.style=s.verifyStyle||"lagou",t&&(window.gtsenseSwitchFetchResult.style=c,window.gtsenseSwitchFetchResult.verifyEnv=r),window.gtsenseSwitchFetchResult.isFirst=!1,n({vertifyStyle:window.gtsenseSwitchFetchResult.style,verifyEnv:r})})).catch((function(){n({vertifyStyle:"lagou"})}))}))})(n.selfVertifyStyle,n.isV4GtSense).then((function(e){var n,p=e.vertifyStyle,w=e.verifyEnv;window.gtsenseSwitchFetchResult.pengdingGtSense||(window.gtsenseSwitchFetchResult.pengdingGtSense=!0,"lagou"===p&&(f(),window.gtsenseSwitchFetchResult.pengdingGtSense=!1),"nolagou"===p&&(n={id:c,errorCallback:d},new Promise((function(e,o){t("https://www.lgstatic.com/mds-pipline-fed/common/static/js/gt.sense.js",{type:"gt_sense",callback:function(){var t=n.id,o=n.errorCallback;try{initSense({id:t,https:!0,onError:function(e){i({message:"gt sense onError"}),console.log("极验initSense error: ".concat(e))}},(function(n){return n._c_interactive=0,n.setInfos((function(){return{interactive:n._c_interactive}})).onSuccess((function(e){n._c_onSuccess&&n._c_onSuccess({challenge:e.challenge})})).onClose((function(){n.reset(),n._c_onClose&&n._c_onClose()})).onError((function(e){i({message:"gt sense error"}),e&&"1001"===e.code&&o&&o({challenge:""})})),e(n)}))}catch(e){i({message:"gt sense ReferenceError"}),console.error(e)}}})}))).then((function(e){window.gtsenseSwitchFetchResult.pengdingGtSense=!1,function(e,n){var t=e.successCallback,o=e.closeCallback;n._c_interactive=e.level,n._c_onSuccess=t,n._c_onClose=o,n.sense()}({successCallback:l,closeCallback:u,level:r},e)})),"nolagou_tencent"===p&&new Promise((function(e,n){t("https://www.lgstatic.com/mds-pipline-fed/common/static/js/TCaptcha.sense.js",{type:"tc_sense",callback:function(){if(window.TencentCaptcha||i({message:"tencent sense error, no global TencentCaptcha"}),window.TencentCaptcha)return e({})}})})).then((function(e){window.gtsenseSwitchFetchResult.pengdingGtSense=!1,!0,s({tcAppId:o,successCallback:l,closeCallback:u})})),"gt4"===p&&new Promise((function(e,n){t("https://s21.lgstatic.com/growth/activity/20220401/1648790818279.js",{type:"gt_sense_v4",callback:function(){if(window.initGeetest4||i({message:"geetest sense error, no global initGeetest4"}),window.initGeetest4)return e({})}})})).then((function(){window.gtsenseSwitchFetchResult.pengdingGtSense=!1;initGeetest4({captchaId:"test"===w?"75ec8a8a46f5a35247488204460f5a12":a,product:"bind"},(function(e){e.onReady((function(){e.showCaptcha()})).onSuccess((function(){var n=e.getValidate();l(n)})).onClose((function(){u&&u()})).onError((function(){u&&u(),console.log("captcha error")}))}))})))}))};return window.LaGouCaptchaGetSenseKey=c,c}));
